<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>MEMOMU Game</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id="centerWrap">
    <div id="gameContainer">
      <canvas id="gameCanvas" width="800" height="700"></canvas>
    </div>
  </div>
  
  <!-- Wallet Selection Modal -->
  <div id="walletModal" class="wallet-modal" style="display: none;">
    <div class="wallet-modal-content">
      <h2>Choose Your Wallet</h2>
      <button class="wallet-option" onclick="connectMetaMask()">
        🦊 MetaMask
      </button>
      <button class="wallet-option" onclick="connectWalletConnect()">
        🔗 WalletConnect
      </button>
      <button class="wallet-option wallet-disconnect" onclick="disconnectWallet()">
        🔌 Disconnect
      </button>
      <button class="wallet-option wallet-close" onclick="closeWalletModal()">
        Cancel
      </button>
    </div>
  </div>

  <!-- Buy-in Selection Modal -->
  <div id="buyInModal" class="wallet-modal" style="display: none;">
    <div class="wallet-modal-content">
      <h2>Select Buy-in Amount</h2>
      <div style="margin: 20px 0; color: #666; font-size: 14px;">
        Choose your buy-in for this tournament
      </div>
      <button class="wallet-option" onclick="selectBuyIn('0.1')">
        💎 0.1 MON
      </button>
      <button class="wallet-option" onclick="selectBuyIn('1.0')">
        💎 1.0 MON
      </button>
      <button class="wallet-option wallet-close" onclick="closeBuyInModal()">
        Cancel
      </button>
    </div>
  </div>

  <!-- MONLUCK Wager Modal -->
  <div id="wagerModal" class="wallet-modal" style="display: none;">
    <div class="wallet-modal-content">
      <h2>Select Your Wager</h2>
      <div style="margin: 20px 0; color: #666; font-size: 14px;">
        Choose your wager amount (0.1 - 2.0 MON)
      </div>
      <input type="range" id="wagerSlider" min="0.1" max="2.0" step="0.1" value="0.5" 
             style="width: 100%; margin: 10px 0;">
      <div id="wagerDisplay" style="font-size: 18px; margin: 10px 0;">0.5 MON</div>
      <button class="wallet-option" onclick="confirmWager()">
        🎲 Place Wager
      </button>
      <button class="wallet-option wallet-close" onclick="closeWagerModal()">
        Cancel
      </button>
    </div>
  </div>

  <!-- Battle Confirmation Modal -->
  <div id="battleConfirmModal" class="wallet-modal" style="display: none;">
    <div class="wallet-modal-content">
      <h2>Battle Mode Entry</h2>
      <div style="margin: 20px 0; color: #666; font-size: 14px;">
        You are about to enter Battle Mode. This will cost 1.0 MON from your wallet.
      </div>
      <div style="font-size: 20px; margin: 15px 0; color: #4CAF50; font-weight: bold;">
        Entry Fee: 1.0 MON
      </div>
      <button class="wallet-option" onclick="confirmBattleEntry()">
        ⚔️ Play for 1.0 MON
      </button>
      <button class="wallet-option wallet-close" onclick="closeBattleConfirmModal()">
        Cancel
      </button>
    </div>
  </div>

  <!-- Blockchain Loading Indicator -->
  <div id="blockchain-loading" class="wallet-modal" style="display: none;">
    <div class="wallet-modal-content">
      <h2>Processing Transaction...</h2>
      <div style="margin: 20px 0; color: #666; font-size: 14px;">
        <div id="blockchain-loading-message">Please wait...</div>
      </div>
      <div style="display: flex; justify-content: center; margin: 20px 0;">
        <div style="border: 4px solid #f3f3f3; border-top: 4px solid #ff69b4; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite;"></div>
      </div>
    </div>
  </div>

  <!-- Ethers.js CDN -->
  <script src="https://unpkg.com/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  
  <script type="module" src="firebase.js"></script>
  <script type="module" src="leaderboard.js"></script>
  <script src="blockchain.js"></script>
  <script type="module" src="memomu.js"></script>
</body>

</html>
